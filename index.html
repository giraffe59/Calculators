<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculators</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: "Roboto Light", sans-serif;
            background-color: darkslategray;
        }
        h1 {
            padding: 10px;
            border-radius: 20px;
            font-size: 50px;
            display: flex;
            justify-content: center;
            background-color: #1f3535;
        }
        input {
            background-color: darkgrey;
            border-radius: 5px;
            text-align: center;
        }
        input {
            /* ... deine bisherigen styles ... */
            -webkit-appearance: none; /* Deaktiviert iOS-Standard-Design */
            appearance: none;
            opacity: 1; /* Stellt sicher, dass der Text nicht blass verschwindet */
         }

          /* Speziell für den Placeholder in Safari */
        input::-webkit-input-placeholder {
             color: #444; /* Wähle eine sichtbare Farbe */
             line-height: normal !important; /* Verhindert vertikales Verschwinden */
        }
        div {
            font-weight: bold;
            text-align: center;
        }
        output {
            color: white;
            display: block;
            background-color: #274242;
            min-height: 1.5em;
            margin-left: auto;
            margin-right: auto;
            min-width: 70px;
            padding-top: 0.3em;
            padding-right: 7px;
            padding-left: 7px;
            width: 75px;
            border-radius: 5px;
            text-align: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        .main {
            margin: 60px;
            display: flex;
            justify-content: left;
            @media screen and (max-width: 600px) {
                justify-content: center;
                margin: 0;
            }
            flex-wrap: wrap;
            gap: 40px;
            width: 100%;
        }
        .TAS_calc {
            background-color: #326666;
            border-radius: 10px;
            font-size: 18px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 85px;
                background-color: #558585;
                border-radius: 5px;
            }
        }
        .gs_calc {
            background-color: #326666;
            border-radius: 10px;
            font-size: 18px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 85px;
                background-color: #558585;
                border-radius: 5px;
            }
        }
        .swc_calc {
            background-color: #326666;
            border-radius: 10px;
            font-size: 18px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 85px;
                background-color: #558585;
                border-radius: 5px;
            }
            output {
                display: inline-block;
            }
        }
        .lvw_calc {
            background-color: #326666;
            border-radius: 10px;
            font-size: 18px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 85px;
                background-color: #558585;
                border-radius: 5px;
            }
        }
        .tod_calc {
            background-color: #326666;
            border-radius: 10px;
            font-size: 18px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 85px;
                background-color: #558585;
                border-radius: 5px;
            }
            output {
                display: inline-block;
            }
        }
    </style>
    <script>
        function IAS_TAS_calc() {
            let ias = Number(document.getElementsByClassName('IAS-TAS_input')[0].value);
            let alt = Number(document.getElementsByClassName('IAS-TAS_alt_input')[0].value);
            let temp = Number(document.getElementsByClassName('IAS-TAS_temp_input')[0].value);
            let qnh = Number(document.getElementsByClassName('IAS-TAS_qnh_input')[0].value);
            if (qnh !== 1013) {
                alt = alt + (1013 - qnh) * 27
            }
            let tas = ias * Math.pow(1 - (0.000006875 * alt), -2.125);

            let isa_temp = 15 - (1.98 * alt / 1000);
            let temp_ratio = Math.sqrt((273.15 + temp) / (273.15 + isa_temp));

            tas = tas * temp_ratio;
            document.getElementsByClassName("IAS-TAS_output")[0].value = Math.round(tas);
        }
        function GS_Calculator() {
            let tas = Number(document.getElementsByClassName('gs_calc_tas')[0].value);
            let ws = Number(document.getElementsByClassName('gs_calc_ws')[0].value);
            let wd = Number(document.getElementsByClassName('gs_calc_wd')[0].value);
            let heading = Number(document.getElementsByClassName('gs_calc_heading')[0].value);
            let alpha

            if (wd < heading) {alpha = Math.abs(heading - wd);}
            else {alpha = Math.abs(wd - heading);}
            if (alpha > 180) {alpha = 360 - alpha;}
            let final_alpha = alpha * (Math.PI / 180);

            let vorhalte = Math.sqrt(tas**2 - (ws * Math.sin(final_alpha))**2)
            let gs = Math.round(vorhalte - ws * Math.cos(final_alpha));
            document.getElementsByClassName("gs_calc_output")[0].value = gs
        }
        function swccalc() {
            let heading = Number(document.getElementsByClassName("swc_calc_heading")[0].value)
            let ws = Number(document.getElementsByClassName("swc_calc_ws")[0].value)
            let wd = Number(document.getElementsByClassName("swc_calc_wd")[0].value)

            let alpha
            let arrow
            if (wd < heading) {
                alpha = Math.abs(heading - wd);
                if (heading - wd < 180) {
                    arrow = "→ "
                } else {
                    arrow = "← "
                }
            }
            else {
                alpha = Math.abs(wd - heading);
                if (wd - heading < 180) {
                    arrow = "← "
                }else {
                    arrow = "→ "
                }
            }
            if (alpha > 180) {alpha = 360 - alpha;}
            let diviation = alpha * (Math.PI / 180);

            let side_wind = Math.round(Math.sin(diviation) * ws * 100) / 100
            let head_wind = Math.round(Math.cos(diviation) * ws * 100) / 100

            const leftArrow = (arrow === "← ") ? arrow : "";
            const rightArrow = (arrow === "→ ") ? arrow : "";

            document.getElementsByClassName("swc_calc_output")[0].value = rightArrow + side_wind + leftArrow;
            document.getElementsByClassName("swc_calc_ouptutt")[0].value = "↓ " + head_wind
        }
        function lvwCalc() {
            let ws = Number(document.getElementsByClassName("lvw_calc_ws")[0].value);
            let wd = Number(document.getElementsByClassName("lvw_calc_wd")[0].value);
            let tas = Number(document.getElementsByClassName("lvw_calc_tas")[0].value);
            let heading = Number(document.getElementsByClassName("lvw_calc_heading")[0].value);

            if (heading === 360) heading = 0;

            let alpha;
            let add = false;

            if (wd < heading) {
                alpha = heading - wd;
                if (alpha < 180) {
                    add = false;
                } else {
                    alpha = 360 - alpha;
                    add = true;
                }
            } else {
                alpha = wd - heading;
                if (alpha < 180) {
                    add = true;
                } else {
                    alpha = 360 - alpha;
                    add = false;
                }
            }
            const diviation = alpha * (Math.PI / 180);
            let wca = Math.asin(ws * Math.sin(diviation) / tas) * 180 / Math.PI;

            let raw_h = (add) ? (heading + wca) : (heading - wca);
            let final_heading = (raw_h % 360 + 360) % 360;
            final_heading = Math.round(final_heading * 100) / 100;

            let zeros = "";
            if (final_heading < 10) { zeros = "00"; }
            else if (final_heading < 100) { zeros = "0"; }

            document.getElementsByClassName("lvw_calc_output")[0].value = zeros + final_heading;
        }
        function todCalc() {
            let gs = Number(document.getElementsByClassName("tod_calc_gs")[0].value) - 20;
            let ftd = Number(document.getElementsByClassName("tod_calc_ftd")[0].value);
            let ddr = Number(document.getElementsByClassName("tod_calc_ddr")[0].value);

            const minutes_to_descent = ftd / ddr;

            const nmMinute = gs / 60;

            document.getElementsByClassName("tod_calc_output")[0].value = Math.round(minutes_to_descent * nmMinute * 100) / 100 + "NM To descent";
        }
    </script>
</head>
<body>
    <div class="über">
    <h1>Calculators</h1>
    </div>
    <div class="main">
        <div class="TAS_calc">
            <p>IAS - TAS Calculator</p>
            <label>
                <input class="IAS-TAS_input" type="number" placeholder=" IAS">
                <input class="IAS-TAS_alt_input" type="number" placeholder=" ALT">
                <input class="IAS-TAS_temp_input" type="number" placeholder=" TEMP °C">
                <input class="IAS-TAS_qnh_input" type="number" placeholder=" QNH/QNE">
                <button class="IAS-TAS_button" onclick="IAS_TAS_calc()">Calculate</button>
            </label>
            <output class="IAS-TAS_output"></output>
        </div>
        <div class="gs_calc">
            <p>GS Calculator</p>
            <label>
                <input class="gs_calc_tas" type="number" placeholder=" TAS">
                <input class="gs_calc_ws" type="number" placeholder=" WS">
                <input class="gs_calc_wd" type="number" placeholder=" WD">
                <input class="gs_calc_heading" type="number" placeholder=" heading">
                <button class="gs_calc_button" onclick="GS_Calculator()">Calculate</button>
            </label>
            <output class="gs_calc_output"></output>
        </div>
        <div class="swc_calc">
            <p>Wind Component</p>
            <label>
                <input class="swc_calc_heading" type="number" placeholder=" heading">
                <input class="swc_calc_ws" type="number" placeholder=" WS">
                <input class="swc_calc_wd" type="number" placeholder=" WD">
                <button class="swd_calc_button" onclick="swccalc()">Calculate</button>
            </label>
            <output class="swc_calc_output"></output>
            <output class="swc_calc_ouptutt"></output>
        </div>
        <div class="lvw_calc">
            <p>Wind correciton Angle</p>
            <label>
                <input class="lvw_calc_ws" type="number" placeholder=" WS">
                <input class="lvw_calc_wd" type="number" placeholder=" WD">
                <input class="lvw_calc_tas" type="number" placeholder=" TAS">
                <input class="lvw_calc_heading" type="number" placeholder=" heading">
                <button class="lvw_calc_button" onclick="lvwCalc()">Calculate</button>
            </label>
            <output class="lvw_calc_output"></output>
        </div>
        <div class="tod_calc">
            <p>Top Of Descent</p>
            <label>
                <input class="tod_calc_gs" type="number" placeholder="GS">
                <input class="tod_calc_ftd" type="number" placeholder=" Δ ALT (ft)">
                <input class="tod_calc_ddr" type="number" placeholder="ft/m">
                <button class="tod_calc_button" onclick="todCalc()">Calculator</button>
            </label>
            <output class="tod_calc_output"></output>
        </div>
    </div>
</body>
</html>
