<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            background-color: darkslategray;
        }
        h1 {
            font-size: 50px;
            display: flex;
            justify-content: center;
        }
        input {
            background-color: darkgrey;
            border-radius: 5px;
        }
        .über {

        }
        .main {
            margin: 60px;
            display: flex;
            justify-content: left;
            flex-wrap: wrap;
            gap: 40px;
            width: 100%;
        }
        .TAS_calc {
            font-size: 20px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 90px;
                background-color: #558585;
                border-radius: 5px;
            }
        }
        .gs_calc {
            font-size: 20px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 90px;
                background-color: #558585;
                border-radius: 5px;
            }
        }
        .swc_calc {
            font-size: 20px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 90px;
                background-color: #558585;
                border-radius: 5px;
            }
            output {
                width: 75px;
                margin: 5px;
            }
        }
        .lvw_calc {
            font-size: 20px;
            margin: 20px;
            min-width: 200px;
            max-width: 200px;
            input {
                margin: 5px;
                width: 75px;
            }
            button {
                margin: 5px;
                width: 90px;
                background-color: #558585;
                border-radius: 5px;
            }
        }
    </style>
    <script>
        function IAS_TAS_calc() {
            let ias = Number(document.getElementsByClassName('IAS-TAS_input')[0].value);
            let alt = Number(document.getElementsByClassName('IAS-TAS_alt_input')[0].value);
            let temp = Number(document.getElementsByClassName('IAS-TAS_temp_input')[0].value);
            let qnh = Number(document.getElementsByClassName('IAS-TAS_qnh_input')[0].value);
            if (qnh !== 1013) {
                alt = alt + (1013 - qnh) * 27
            }
            let tas = ias * Math.pow(1 - (0.000006875 * alt), -2.125);

            let isa_temp = 15 - (1.98 * alt / 1000);
            let temp_ratio = Math.sqrt((273.15 + temp) / (273.15 + isa_temp));

            tas = tas * temp_ratio;
            document.getElementsByClassName("IAS-TAS_output")[0].value = Math.round(tas);
        }
        function GS_Calculator() {
            let tas = Number(document.getElementsByClassName('gs_calc_tas')[0].value);
            let ws = Number(document.getElementsByClassName('gs_calc_ws')[0].value);
            let wd = Number(document.getElementsByClassName('gs_calc_wd')[0].value);
            let heading = Number(document.getElementsByClassName('gs_calc_heading')[0].value);
            let alpha

            if (wd < heading) {alpha = Math.abs(heading - wd);}
            else {alpha = Math.abs(wd - heading);}
            if (alpha > 180) {alpha = 360 - alpha;}
            let final_alpha = alpha * (Math.PI / 180);

            let vorhalte = Math.sqrt(tas**2 - (ws * Math.sin(final_alpha))**2)
            let gs = Math.round(vorhalte - ws * Math.cos(final_alpha));
            document.getElementsByClassName("gs_calc_output")[0].value = gs
        }
        function swccalc() {
            let heading = Number(document.getElementsByClassName("swc_calc_heading")[0].value)
            let ws = Number(document.getElementsByClassName("swc_calc_ws")[0].value)
            let wd = Number(document.getElementsByClassName("swc_calc_wd")[0].value)

            let alpha
            let arrow
            if (wd < heading) {
                alpha = Math.abs(heading - wd);
                if (heading - wd < 180) {
                    arrow = "→ "
                } else {
                    arrow = "← "
                }
            }
            else {
                alpha = Math.abs(wd - heading);
                if (wd - heading < 180) {
                    arrow = "← "
                }else {
                    arrow = "→ "
                }
            }
            if (alpha > 180) {alpha = 360 - alpha;}
            let diviation = alpha * (Math.PI / 180);

            let side_wind = Math.round(Math.sin(diviation) * ws * 100) / 100
            let head_wind = Math.round(Math.cos(diviation) * ws * 100) / 100

            const leftArrow = (arrow === "← ") ? arrow : "";
            const rightArrow = (arrow === "→ ") ? arrow : "";

            document.getElementsByClassName("swc_calc_output")[0].value = rightArrow + side_wind + leftArrow;
            document.getElementsByClassName("swc_calc_ouptutt")[0].value = "↓ " + head_wind
        }
        function lvwCalc() {
            let ws = Number(document.getElementsByClassName("lvw_calc_ws")[0].value);
            let wd = Number(document.getElementsByClassName("lvw_calc_wd")[0].value);
            let tas = Number(document.getElementsByClassName("lvw_calc_tas")[0].value);
            let heading = Number(document.getElementsByClassName("lvw_calc_heading")[0].value);

            if (heading === 360) heading = 0;

            let alpha;
            let add = false;

            if (wd < heading) {
                alpha = heading - wd;
                if (alpha < 180) {
                    add = false;
                } else {
                    alpha = 360 - alpha;
                    add = true;
                }
            } else {
                alpha = wd - heading;
                if (alpha < 180) {
                    add = true;
                } else {
                    alpha = 360 - alpha;
                    add = false;
                }
            }
            const diviation = alpha * (Math.PI / 180);
            let wca = Math.asin(ws * Math.sin(diviation) / tas) * 180 / Math.PI;

            let raw_h = (add) ? (heading + wca) : (heading - wca);
            let final_heading = (raw_h % 360 + 360) % 360;
            final_heading = Math.round(final_heading * 100) / 100;

            let zeros = "";
            if (final_heading < 10) { zeros = "00"; }
            else if (final_heading < 100) { zeros = "0"; }

            document.getElementsByClassName("lvw_calc_output")[0].value = zeros + final_heading;
        }
    </script>
</head>
<body>
    <div class="über">
    <h1>Calculators</h1>
    </div>
    <div class="main">
        <div class="TAS_calc">
            <p>IAS - TAS Calculator</p>
            <input class="IAS-TAS_input" type="number", placeholder=" IAS">
            <input class="IAS-TAS_alt_input", type="number", placeholder=" ALT">
            <input class="IAS-TAS_temp_input", type="number", placeholder=" TEMP °C">
            <input class="IAS-TAS_qnh_input", type="number", placeholder=" QNH/QNE">
            <button class="IAS-TAS_button", onclick="IAS_TAS_calc()">Calculate</button>
            <output class="IAS-TAS_output"></output>
        </div>
        <div class="gs_calc">
            <p>GS Calculator</p>
            <input class="gs_calc_tas" type="number", placeholder=" TAS">
            <input class="gs_calc_ws", type="number", placeholder=" WS">
            <input class="gs_calc_wd", type="number", placeholder=" WD">
            <input class="gs_calc_heading", type="number", placeholder=" heading">
            <button class="gs_calc_button", onclick="GS_Calculator()">Calculate</button>
            <output class="gs_calc_output"></output>
        </div>
        <div class="swc_calc">
            <p>Wind Component</p>
            <input class="swc_calc_heading", type="number", placeholder=" heading">
            <input class="swc_calc_ws", type="number", placeholder=" WS">
            <input class="swc_calc_wd", type="number", placeholder=" WD">
            <button class="swd_calc_button", onclick="swccalc()">Calculate</button>
            <output class="swc_calc_output"></output>
            <output class="swc_calc_ouptutt"></output>
        </div>
        <div class="lvw_calc">
            <p>Wind correciton Angle</p>
            <input class="lvw_calc_ws", type="number", placeholder=" WS">
            <input class="lvw_calc_wd", type="number", placeholder=" WD">
            <input class="lvw_calc_tas", type="number", placeholder=" TAS">
            <input class="lvw_calc_heading", type="number", placeholder=" heading">
            <button class="lvw_calc_button", onclick="lvwCalc()">Calculate</button>
            <output class="lvw_calc_output"></output>
        </div>
    </div>
</body>
</html>